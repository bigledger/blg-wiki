<!DOCTYPE html>
<html>
<head>
    <title>Test Search</title>
</head>
<body>
    <h1>Search Test</h1>
    <button onclick="testSearch()">Test Search Data</button>
    <pre id="output"></pre>
    
    <script>
    async function testSearch() {
        const output = document.getElementById('output');
        try {
            // Test fetching search data
            const resp = await fetch('/en.search-data.json');
            const data = await resp.json();
            
            // Check data structure
            output.textContent = 'Search data loaded successfully!\n';
            output.textContent += 'Type: ' + typeof data + '\n';
            output.textContent += 'Is Object: ' + (data && typeof data === 'object') + '\n';
            
            if (typeof data === 'object') {
                const keys = Object.keys(data);
                output.textContent += 'Number of entries: ' + keys.length + '\n';
                output.textContent += 'First 5 keys:\n';
                keys.slice(0, 5).forEach(key => {
                    output.textContent += '  - ' + key + '\n';
                });
                
                // Check structure of first entry
                const firstKey = keys[0];
                const firstEntry = data[firstKey];
                output.textContent += '\nFirst entry structure:\n';
                output.textContent += JSON.stringify(firstEntry, null, 2).substring(0, 500);
            }
            
            // Test FlexSearch
            if (typeof FlexSearch !== 'undefined') {
                output.textContent += '\n\nFlexSearch is loaded!';
            } else {
                output.textContent += '\n\nFlexSearch is NOT loaded!';
            }
            
        } catch (error) {
            output.textContent = 'Error: ' + error.message;
            console.error(error);
        }
    }
    </script>
</body>
</html>