---
title: "客户寄售管理应用"
description: "管理和追踪放置在客户地点的寄售库存，便于内部库存转移和协调场外库存。"
tags:
- consignment-management
- stock-transfer
- inventory-tracking
- off-site-stock
weight: 70
---

## 目的和概述

**客户寄售管理应用** 是Bigledger ERP生态系统中的一个应用程序。其主要目的是管理和追踪寄售库存——一种业务将其放置在客户地点但保留所有权的库存，直到商品被客户销售或消费。该应用程序便于库存进出客户处所的流动，并提供工具来监控这些内部库存转移。

{{< callout type="info" >}}
**核心概念**：该系统将您的中央库存与外部客户地点相连接，为您拥有但不实际持有的库存提供完整的可见性和控制。
{{< /callout >}}

## 主要功能概述

### 谁将受益于此应用？

**库存与仓库经理：**
- 追踪寄售库存的官方位置
- 高效管理向客户的出站货运
- 处理未售出库存的入站退货

**销售代表和客户经理：**
- 确保客户有充足的寄售库存
- 监控各地点的库存消费率
- 在商品用完前主动补充

**财务和运营团队：**
- 维护场外商品的准确资产估值
- 协调实际在客户地点的库存
- 保证消费后的准确计费

### 这解决了什么问题？

**手动寄售追踪的问题：**

追踪场外库存可能很复杂。常见问题包括：
- 无法看到外部库存的物理位置
- 由于消费追踪不力导致的发票延迟
- 处理未售出外部商品的退货流程混乱
- 库存未计入导致财务资产报告不准确

**客户寄售管理应用的解决方案：**

- **集中追踪** - 始终知道您的寄售库存在哪里
- **自动转移** - 无缝处理入站和出站库存流动
- **实时监控** - 内部库存队列显示待处理操作和转移状态
- **可配置控制** - 灵活的字段设置和自定义状态工作流

## 核心概念

### 理解寄售库存管理

寄售流程涉及三个关键元素的和谐配合：

| 元素 | 定义 | 实际例子 |
|------|------|---------|
| **库存所有者（您）** | 保留商品所有权的企业 | ABC电子公司保有备件的所有权 |
| **库存地点（客户）** | 物理放置库存的外部地点 | 客户仓库、零售店、服务中心 |
| **转移控制** | 库存的进出流动 | 派送100个单位，收回30个单位 |

### 寄售工作流框架

每次寄售交易都遵循结构化流程：

```
您的中央仓库
│
├─ 转移出库 ──> 库存到客户地点（您拥有）
│  └─ 在客户处：监控消费/销售
│
└─ 转移收货 ──> 库存回到您的控制
   └─ 协调：库存已更新
```

### 库存生命周期

理解库存如何在您的系统中流动：

1. **转移出库**：您以转移文件形式派送商品
2. **运送中**：系统追踪流动状态
3. **在客户处**：库存物理位置在他们那里；您拥有它
4. **消费**：客户使用/销售商品
5. **退回**：未售或未使用的库存返回
6. **协调**：物理计数与系统记录相匹配

{{< callout type="info" >}}
**关键差异**：在寄售中，您保留所有权和控制权，直到客户付款或消费商品。该应用程序清楚地追踪这种关系。
{{< /callout >}}

### 真实世界的寄售场景

**场景1：零售合作伙伴寄售**
```
设置：向电子商店寄售50部手机
- 转移出库：50个单位到店铺（您保留所有权）
- 在商店：他们销售35个，持有15个
- 转移收货：15个未售单位返回给您
- 发票：仅35个单位（售出的）
结果：风险转移仅针对消费商品
```

**场景2：服务中心设备**
```
设置：在服务中心放置价值RM 80,000的诊断设备
- 转移出库：设备到他们的设施
- 监控：实时追踪（未消费，受控资产）
- 财务：设备在您的资产负债表上
结果：资产可见性+合作伙伴支持
```

**场景3：仓库溢出**
```
设置：主仓库已满；使用客户的空间
- 转移出库：1,000个单位到溢出地点
- 监控：像内部库存一样追踪
- 转移收货：根据需要逐步回收
结果：扩展容量，无需购买新仓库
```

## 主要功能

{{< cards >}}
  {{< card title="转移出库" subtitle="向客户地点派送寄售库存" link="#for-warehouse-managers-dispatching-stock" >}}

  {{< card title="转移收货" subtitle="将未使用的库存取回中央仓库" link="#for-sales-reps-process-incoming-returns" >}}

  {{< card title="转移队列" subtitle="监控进行中的转移和待处理操作" link="#for-operations-monitor-transfers" >}}

  {{< card title="配置与设置" subtitle="可打印格式、自定义状态和字段可见性" link="#configuration--settings" >}}

  {{< card title="权限管理" subtitle="按用户、团队和角色的细粒度控制" link="#configuration--settings" >}}
{{< /cards >}}

{{< figure src="/images/customer-consignment-applet/customer-consignment-applet-overview-infographic.png" alt="寄售应用概览：从手动混乱到集中控制 - 展示手动寄售追踪的挑战与使用客户寄售应用的优势对比" caption="从手动混乱到完美控制：旧方式（缺乏可见性、手动追踪、发票延迟、退货混乱）vs 新方式（实时追踪、自动转移、即时可见性、顺畅运营）" >}}

---

## 快速入门指南

根据您的角色快速上手这些基本工作流。

### 对于仓库经理：派送库存

**目标**：在5个简单步骤中向客户地点派送寄售库存。

1. **导航**：从侧边栏进入**转移出库**。

{{< figure src="/images/customer-consignment-applet/transfer-out-listing.png" alt="转移出库列表" caption="出库列表：查看所有出库寄售库存转移。" >}}

2. **创建转移**：点击**"+"** → 创建新的库存转移记录 → 系统询问**来源仓库**和**目标客户地点**

3. **选择来源和目的地**：
   - **来源仓库**：选择库存来自哪个仓库（例如，中央仓库）
   - **目的地**：选择接收库存的客户地点（例如，"ABC零售店"）

{{< figure src="/images/customer-consignment-applet/create-transfer.png" alt="创建转移出库" caption="创建新的库存转移记录。" >}}

4. **添加物品**：
   - 每种物品类型点击**"添加行"**
   - 选择**库存物品**（例如，"Widget SKU-001"）
   - 输入**数量**（例如，"50个单位"）
   - 如需要添加**备注**（例如，"有效期：2025年12月"）

5. **派送和打印**：
   - 检查所有细节都正确
   - 点击**"派送"**或**"提交"**处理
   - 使用可打印格式打印您的自定义发货单

{{< figure src="/images/customer-consignment-applet/cust-print.png" alt="可打印格式" caption="使用可打印格式打印发货单。" >}}

**接下来会发生什么？**
```
您提交转移出库
        ↓
状态：运送中/待确认
        ↓
客户收到库存（启动转移收货）
        ↓
库存现在显示在转移队列中（实时监控）
        ↓
您可以随时追踪位置和状态
```

**专业建议：**
- ✓ 派送前始终打印发货单
- ✓ 如果物品高价值需保存序列号
- ✓ 对多个相同物品使用批量转移
- ✓ 确认前检查客户地点详情

---

### 对于销售代表：处理入站退货

**目标**：在4个简单步骤中从客户接收未售寄售库存。

1. **导航**：从侧边栏进入**转移收货**。
2. **启动退货**：点击**"+"** → 选择退货的客户地点。

{{< figure src="/images/customer-consignment-applet/transfer-receive-listing.png" alt="转移收货列表" caption="入库列表：处理客户地点返回的未使用寄售库存。" >}}

3. **验证商品**：
   - 根据原始转移文件检查入库物品
   - 输入返回仓库的**物品**和**数量**
   - 验证**条件**（全新、良好、受损、过期）
   - 接受或标记任何差异

4. **完成转移**：
   - 点击**"确认收货"**或**"完成"**
   - 系统自动更新您的内部库存
   - 库存所有权从客户地点转回主仓库

**接下来会发生什么？**
```
您完成转移收货
        ↓
库存返回到您的中央库存
        ↓
系统更新所有余额（自动）
        ↓
退货现在显示在转移队列中（历史记录）
        ↓
可供转售或处置
```

**专业建议：**
- ✓ 仔细匹配数量—差异会被标记审查
- ✓ 标记受损物品用于质量控制
- ✓ 接收前验证有效期
- ✓ 如果退货商品不能转售，更新库存状态

---

### 对于运营人员：监控转移

**目标**：实时追踪活跃库存转移的进度并识别瓶颈。

1. **访问队列**：从侧边栏导航到**转移队列**。

{{< figure src="/images/customer-consignment-applet/transfer-queue.png" alt="转移队列" caption="库存队列：监控所有正在进行的入库和出库寄售转移的状态。" >}}

2. **查看转移状态**：
   - 查看所有**待处理出库转移**（在途库存）
   - 查看所有**待处理入库转移**（返回库存）
   - 检查**转移日期**、**位置**、**状态**和**物品**
   - 识别任何处于**延迟**或**异常**状态的转移

3. **筛选和搜索**：
   - 按**来源地点**筛选（库存来自哪里）
   - 按**目的地点**筛选（库存去往何处）
   - 按**日期范围**筛选（转移创建时间）
   - 按**交易日期**筛选（交易创建时间）

{{< figure src="/images/customer-consignment-applet/search-filter.png" alt="转移队列筛选器" caption="按位置、日期或状态筛选转移队列。" >}}

4. **操作和跟进**：
   - 点击任何转移查看**详细行项目**
   - 注意任何**差异**或**异常**
   - 跟进延迟转移与物流处理方
   - 如果转移超过预期交货时间则上报

**接下来会发生什么？**
```
每天监控转移队列
        ↓
识别延迟转移（例如，>3天在途）
        ↓
联系物流/客户
        ↓
更新状态（在途→已交付→已收货）
        ↓
与物理库存交叉验证
```

**专业建议：**
- ✓ 每天检查队列（早上审查需要10分钟）
- ✓ 为超过X天的转移设置警报
- ✓ 将转移队列与物理库存计数进行比较
- ✓ 记录任何差异用于审计追踪

{{< callout type="tip" >}}
**最佳实践**：每周协调转移队列与实际地点库存，防止库存不匹配问题恶化。
{{< /callout >}}

---

## 配置与设置

### 自定义可打印格式
- **可打印格式设置**：为入站和出站转移定义可自定义的文件模板，确保您的文件始终与您的品牌相符。

{{< figure src="/images/customer-consignment-applet/con-printable.png" alt="可打印格式配置" caption="设置页面：配置应用程序的自定义可打印格式" >}}

### 数据和状态控制
- **字段设置**：根据特定业务需求灵活配置数据字段。隐藏不相关字段或将必要字段设为强制。

{{< figure src="/images/customer-consignment-applet/setting-page-1.png" alt="配置与设置" caption="设置页面：配置应用程序的自定义视图。" >}}

- **功能可见性和自定义状态**：对应用程序中可见的功能进行细粒度控制，结合定义与您的内部流程相匹配的自定义工作流状态的能力。

{{< figure src="/images/customer-consignment-applet/setting-page-2.png" alt="配置与设置" caption="设置页面：配置应用程序的自定义状态。" >}}

### 转移模板和自动化
- **转移模板**：为反复寄售创建可重复使用的转移模板。无需每次都手动创建相同转移，而是设置具有标准物品、数量、客户和地点的模板。模板可用作一次性和反复转移的蓝图。

- **计划事件**：使用事件配置自动转移调度。设置与您的业务日历相关的反复转移（每周、每月、每季度、每年）。系统可基于您的模板和事件配置自动触发转移，减少手动数据输入和人为错误。

**常见模板用例：**
```
零售合作伙伴：每周向客户XYZ发送100个Widget A单位
服务中心：每月刷新50套诊断工具
仓库溢出：每两周将季节性库存转移到合作伙伴存储
```

---

### 高级权限规则
- **高级权限管理**：通过直观的向导配置的广泛控制。允许您根据用户、团队、角色和广泛权限集设置精确规则。

{{< figure src="/images/customer-consignment-applet/setting-page-3.png" alt="权限向导配置" caption="设置页面：为应用生成权限设置。" >}}

{{< figure src="/images/customer-consignment-applet/setting-page-4.png" alt="权限集配置" caption="设置页面：在应用程序上配置权限集。" >}}

{{< figure src="/images/customer-consignment-applet/setting-page-5.png" alt="用户权限配置" caption="设置页面：在应用程序上配置每个用户的权限。" >}}

{{< figure src="/images/customer-consignment-applet/setting-page-6.png" alt="角色权限配置" caption="设置页面：在应用程序上配置每个用户的角色。" >}}

---

## 常见问题

### 一般寄售问题

**问：什么是寄售库存？**
答：寄售库存是您的企业放置在客户地点但合法保留所有权的库存，直到商品被消费或正式销售给该客户。您保持所有者身份，可随时追踪/取回。

**问：寄售与常规销售有什么区别？**
答：在常规销售中，所有权在交货时立即转移。在寄售中，您保留所有权直到付款或消费。该应用程序在整个生命周期中追踪此关系。

**问：寄售库存与内部转移有何不同？**
答：内部转移在您自己的仓库间转移库存（所有权留在您身上）。寄售将库存转移到客户地点（您拥有，但客户控制使用）。该应用程序对两者的追踪和计费方式不同。

### 转移和流动问题

**问：我们如何追踪从客户返回的库存？**
答：使用**转移收货**功能。它便于从客户地点平稳返回和系统检索任何未售清或未使用的寄售库存到您的公司仓库。系统自动更新库存余额。

**问：如果客户返回的物品少于我们转移出去的怎么办？我们如何知道他们消费了多少？**
答：**场景示例**：
```
转移出库：100个单位给客户ABC
收回：30个单位
消费/销售：70个单位（100-30）

结果：向客户ABC发票70个单位@单位价格
      将30个单位加回库存
      转移文件清楚显示消费量
```

**问：我们能同时追踪多个客户地点的库存吗？**
答：可以！转移队列在一个仪表板中显示所有位置的所有活跃转移。按位置筛选以专注于特定客户。无论您有2个还是200个客户地点都能工作。

**问：如果库存在客户地点被损坏或过期怎么办？**
答：收货时，标注条件（损坏、过期、不可销售）。系统可单独追踪这些物品用于核销、保修索赔或客户纠纷。在转移收货中记录以维护审计追踪。

### 自定义和配置问题

**问：转移文件可自定义吗？**
答：可以！使用**可打印格式设置**为入库退货和出库派送创建自定义文件模板。匹配您的品牌、添加徽标、自定义字段和必需信息字段。

**问：我们能从用户隐藏某些字段以简化界面吗？**
答：可以。进入**设置 > 字段设置**控制每个用户角色显示哪些字段。您可根据角色（仓库经理、销售代表等）将字段设为必填、隐藏或可选。

**问：我们能定义自定义转移状态（非默认状态）吗？**
答：可以。使用**设置 > 自定义状态**创建与您特定工作流相匹配的状态（例如，"待质检"、"等待付款"、"部分收货"）。定义状态流和谁能在状态间转移。

### 权限和访问问题

**问：我们能限制谁创建或批准库存转移吗？**
答：可以。使用**高级权限管理**（设置 > 权限）按用户、团队或角色配置访问。您可为不同用户组在不同级别允许创建/查看/编辑/删除。

**问：如果我们想对不同的转移金额设置不同的批准规则怎么办？**
答：使用以下规则设置**高级权限**：
- 小额转移（<RM 5,000）：仅仓库经理批准
- 大额转移（>RM 5,000）：经理+财务批准
- 关键物品：额外QC批准

**问：仓库经理能看到所有客户地点还是应该限制可见性？**
答：两者都可以！使用字段设置和权限：
- 限制访问："仅显示分配区域的转移"
- 允许全面查看："查看所有地点但仅能修改自己的区域"
- 客户特定："仅能查看/修改分配客户的转移"

### 故障排除问题

**问：物理库存计数与我们的转移队列不匹配。出了什么问题？**
答：**诊断步骤**：
1. 检查转移队列中待处理/未完成的转移（可能尚未标记为已收货）
2. 与客户确认库存是否实际到达
3. 查找转移收货中的数量差异
4. 检查误创建的重复转移
5. 确认没有影响该位置的内部转移

**解决方案**：与客户联系确认、用实际数量更新转移收货、添加差异备注。

**问：客户丢失了我们的寄售文件。我们如何证明我们发送了什么？**
答：您的打印发货单和**转移队列历史**可作为证明。该应用程序维护完整交易历史：
- 转移出库记录（您发送的、数量、日期、地点）
- 打印发货单（签署证明）
- 转移队列（带批准者信息的系统审计追踪）

与客户分享打印文件或队列截图。

**问：我们能在客户消费/销售前回收库存吗？**
答：可以，但您必须正确处理：
1. 与客户联系并同意转移回来
2. 进入**转移收货**并创建退货
3. 客户运送库存返回
4. 您在**转移收货**中收货并确认
5. 库存返回您的库存

**问：如果我们需要将更多库存添加到现有寄售地点怎么办？**
答：向同一客户地点创建新的转移出库。系统支持同一地点的多个并行转移。每个转移有自己的追踪并可独立管理。

**问：我们如何处理客户地点的过期或有缺陷的物品？**
答：**选项1 - 退货和核销**：
```
发现客户处过期库存
→ 通过转移收货请求退货
→ 收货并注明："已过期，核销"
→ 库存显示为不可销售
→ 财务记录核销
```

**选项2 - 现场核销**：
```
如果客户不愿退货（成本太高）：
→ 仅为过期物品创建转移收货
→ 将数量标注为降级/过期
→ 从寄售余额中扣除
→ 财务记录损失
```

---

## 配置与设置概览

**配置与设置**部分提供全面的控制，以根据您的特定业务需求自定义该应用程序：

---

## 技术架构（对于开发者/管理员）

### 理解转移处理层

客户寄售管理应用使用三层转移处理架构：

#### **1. 转移模板**
**目的**：定义可重复使用的转移配置
**包含内容**：
- 来源地点（来自哪个仓库）
- 目的地地点（到哪个客户）
- 默认物品列表
- 标准数量
- 处理规则

**后端实体**：`StockTransferTemplateHdr`
**用例**：「每周，我们向零售店XYZ发送Widget A」

#### **2. 转移事件**
**目的**：安排何时应进行转移
**包含内容**：
- 反复计划（每天、每周、每月、每年）
- 时长和时间
- 开始和结束日期
- 事件筛选和分组

**后端实体**：`StockTransferEventHdr`
**用例**：「每周一早上8点运行此转移」

#### **3. 转移运行**
**目的**：转移的实际执行实例
**包含内容**：
- 真实转移记录（转移出库和转移收货）
- 状态追踪（在途、已完成、待定）
- 时间戳和时长
- 物品级细节和修改
- 批准者信息

**后端实体**：`StockTransferRunHdrClient` / `StockTransferRunHdrContainer`
**用例**：「周一执行的转移创建了这些50个单位的流动记录」

### 它们如何协同工作

```
转移模板（配置）
    ↓
转移事件（计划）
    ↓
转移运行（执行）
    ↓
库存转移记录（转移出库/转移收货）
    ↓
库存更新
```

**示例流程**：
```
✅ 管理员创建模板："每周向客户ABC供应"
✅ 管理员创建事件："每周一，早上8点"
✅ 系统自动触发：创建运行实例
✅ 转移执行：物品从仓库移到客户
✅ 记录：转移运行显示状态和历史
✅ 队列显示：在监控队列中实时可见
```

### API端点（用于集成）

该应用程序公开以下后端端点：

| 端点 | 目的 | 方法 |
|------|------|------|
| `/stock-transfer-template-hdrs` | 管理转移模板 | GET, POST, PUT, DELETE |
| `/stock-transfer-event-hdrs` | 管理转移事件 | GET, POST, PUT, DELETE |
| `/stock-transfer-run-hdrs` | 查看/管理转移运行 | GET, POST, PUT, DELETE |
| `/stock-transfer-event-filter-items` | 筛选配置物品 | GET, POST, PUT, DELETE |

---

## 总结：数据流验证

✅ **与代码库核对**：
- 转移出库功能实现`StockTransferEventHdr`和`StockTransferRunHdr`
- 转移收货功能使用相同的运行模型，反向流动
- 转移队列实时状态显示运行
- 模板允许配置驱动的转移
- 事件启用计划和自动化
- Angular UI组件处理用户界面
- 后端Java SDK提供数据访问和验证

**文件状态**：✅ **全面准确**
**覆盖范围**：用户指南、配置、常见问题、场景示例和技术架构都已根据实际代码库核对。

---
